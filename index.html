<script>
const DATA = [
  {
    thumbs: "images/item1-thumb.jpg",
    gallery: [
      "images/item1-1.jpg",
      "images/item1-2.jpg",
      "images/item1-3.jpg",
      "images/item1-4.jpg",
      "images/item1-5.jpg",
      "images/item1-6.jpg"
    ]
  },
  {
    thumbs: "images/item2-thumb.jpg",
    gallery: [
      "images/item2-1.jpg",
      "images/item2-2.jpg",
      "images/item2-3.jpg",
      "images/item2-4.jpg",
      "images/item2-5.jpg",
      "images/item2-6.jpg"
    ]
  }
];

const basePath = (function(){
  let p = location.pathname;
  if(p.endsWith("/")) return p;
  return p.replace(/\/[^\/]*$/, "/");
})();

const container = document.getElementById("gallery");
DATA.forEach(it => {
  const img = document.createElement("img");
  img.className = "thumb";
  img.src = basePath + it.thumbs;
  img.addEventListener("click", () => {
    document.getElementById("lightbox").style.display = "flex";
    const box = document.getElementById("lightbox-content");
    box.innerHTML = "";
    it.gallery.forEach(url => {
      const g = document.createElement("img");
      g.src = basePath + url;
      box.appendChild(g);
    });
  });
  container.appendChild(img);
});
</script>
